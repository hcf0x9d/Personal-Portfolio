var model={view:"intro"},control={init:function(){""!==window.location.hash.substr(1)?model.view=window.location.hash.substr(1).split("=")[0]:(model.view="intro",window.location.hash="#intro"),control.view.change(model.view),control.menu()},view:{change:function(e,i){"intro"!==e&&$(".badge").removeClass("mod-full"),$(".menu-target").removeClass("is-active"),$('.menu-target[href="#'+model.view.toLowerCase()+'"]').addClass("is-active"),$(".js-main").fadeTo(250,0,function(){$(".js-main").load("view/"+e+".view.html",function(){control.view.options[e](),$(".js-main").fadeTo(250,1),control.externalLinks(),i&&i()})})},options:{intro:function(){console.log("intro view stuff")},work:function(){$(".work").on("mouseenter mouseleave focusin focusout click",function(e){if("mouseenter"===e.type||"focusin"===e.type)$(this).addClass("is-hovered");else if("mouseleave"===e.type||"focusout"===e.type)$(this).removeClass("is-hovered");else if("click"===e.type){var i=this.id;control.view.change("project"),window.location.hash="project="+i}})},project:function(){function e(){$(".js-main").fadeTo(250,1)}var i=window.location.hash.substr(1).split("=")[1];$(".js-main").fadeTo(250,0,function(){control.view.getProject(i,e)})},resume:function(){$(".stat-graph").each(function(){var e=$(this).data("stat");$(this).append('<span class="stat-graph-bar"></span>'),$(this).find(".stat-graph-bar").css("width",e+"%")})}},getProject:function(e,i){$.ajax("view/projects.xml").success(function(i){for(var n=$(i).find('project[id="'+e+'"]'),t=n.children().length-1;t>=0;t--){var o=n.children()[t].nodeName;if("images"===o){var s=$(n.children()[t]).attr("key");$("#keyImg").attr("src",s),$(n.children()[t]).children().each(function(){var e=this.innerHTML,i='<li class="imglist-item"><img src="'+e+'"/></li>';$("#imgList").append(i)})}else $("#"+o).html(n.children()[t].innerHTML.replace("<![CDATA[","").replace("]]>",""))}}).done(function(e){i()})}},menu:function(){$(".hamburger").on("click",function(e){$(this).toggleClass("is-active"),$(".menu").toggleClass("is-active")}),$(".menu-target").on("click",function(e){model.view=$(this).attr("href").replace("#",""),control.view.change(model.view)})},getUrlVars:function(){for(var e,i=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),t=0;t<n.length;t++)e=n[t].split("="),i.push(e[0]),i[e[0]]=e[1];return i},externalLinks:function(){$('.link[target="_blank"]').on("click",function(){ga("send","event","External Link","Click",$(this).attr("href"))})}};$(function(){control.init()});